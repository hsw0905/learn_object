## 소극장 티켓 판매

### 시나리오
- 관람객(Audience) : 초대장이 있는 관람객, 없는 관람객, 가방 소지
- 초대장이 있는 관람객 -> 티켓으로 교환 후 입장
- 초대장이 없는 관람객 -> 티켓 구매 후 입장
- (Invitation, Ticket)
---
- 관람객의 소지품 : 초대장, 현금(Amount), 티켓
- 소지품 보관용 가방(Bag)
---
- 매표소(TicketOffice)
- 판매원(TicketSeller) : 매표소에서 초대장 -> 티켓 교환, 혹은 티켓 판매
- 소극장(Theater) : 관람객 입장
---
### 초기 상태
- 소극장 -> 관람객 가방을 열고 초대장 여부 확인
- -> 초대장 있으면? -> 판매원 -> 매표소 -> 보관된 티켓을 관람객의 가방으로 옮김
- -> 초대장 없으면? -> 판매원 -> 관람객의 가방 -> 티켓값 꺼내 -> 매표소 적립 -> 티켓을 관람객 가방 안에 넣음
---
### 초기 상태의 문제점
- 관람객, 판매원이 소극장의 통제를 받는 수동적인 존재
- 하나의 클래스에서 너무 많은 세부사항을 다루고 있다
- 변경사항에 코드가 너무 취약하다
---
### 해결점
- 소극장 : 관람객이 소극장에 입장하기만 하면 된다. 그 외 사항은 정보를 차단한다
- 관람객 : 스스로 가방 안의 현금, 초대장을 처리한다.
- 판매원 : 스스로 매표소의 티켓, 판매 요금을 다룬다.

---
### 의존성
- 어떤 객체가 변경될 때 그 객체에게 의존하는 다른 객체도 함께 변경될 수 있다
- 최소한의 의존성만 유지하고 불필요한 의존성은 제거한다

### 결합도
- 객체 사이의 의존성이 과한 경우 : 결합도가 높다
- 객체들이 합리적인 수준으로 의존 : 결합도가 낮다
- -> 객체 사이의 결합도를 낮춰 변경이 용이한 설계를 만든다

### 결합도를 낮추고 변경하기 쉬운 코드
- 객체를 인터페이스와 구현으로 나눈다
- 인터페이스만 공개한다